# Крестики‑нолики vs компьютер + Telegram‑уведомления

Веб‑игра «Крестики‑нолики», где игрок играет против компьютера.

- При **победе** игрока: на экране появляется **рандомный 5‑значный промокод**, а в Telegram отправляется сообщение:  
  `Победа! Промокод выдан: 12345`
- При **проигрыше**: в Telegram отправляется сообщение `Проигрыш`, а на экране появляется предложение сыграть ещё раз.

## Локальный запуск

1) Установить зависимости:

```bash
npm install
```

2) Создать файл `.env` в корне проекта и положить туда переменные (пример в `env.example`).

3) Запустить:

```bash
npm run dev
```

Откройте фронтенд: `http://localhost:5173`  
Backend (API): `http://localhost:5174`

## Настройка Telegram‑бота (для тестирования)

1) Создайте бота через `@BotFather`, получите **TOKEN**.
2) Напишите вашему боту любое сообщение (например, `/start`).
3) Важно: чтобы бот **отправил** сообщение, Telegram требует указать **куда отправлять** — это `chat_id`.

### Вариант A (удобно для игроков, без ручного chat_id): подключение прямо в игре

В игре есть кнопка **«Подключить Telegram»** (опционально). Она выдаёт код вида `XO...`.

Дальше игрок:

1) Нажимает «Открыть Telegram»
2) Жмёт **Start** у бота (в чат приходит `/start <код>`)
3) Возвращается в игру — и дальше при победе/проигрыше сообщения уходят **именно ему**.

Это работает через `getUpdates` (вебхук не нужен).

> Если бот раньше использовался с вебхуком, `getUpdates` может не работать. Тогда отключите вебхук командой:  
> `https://api.telegram.org/bot<TOKEN>/deleteWebhook`

### Вариант B (для одного “тестового” чата): указать TELEGRAM_CHAT_ID вручную

4) Узнайте `chat_id`:

- Откройте в браузере `https://api.telegram.org/bot<TOKEN>/getUpdates`
- В ответе найдите `message.chat.id` (это и есть `TELEGRAM_CHAT_ID`)

5) Заполните `.env`:

- `TELEGRAM_BOT_TOKEN=<ваш токен>`
- `TELEGRAM_CHAT_ID=<ваш chat_id>` (опционально)

## Как получить рабочую ссылку (деплой)

Проект сделан как **один сервис**: Express отдаёт собранный фронтенд и принимает `POST /api/telegram`.

### Вариант: Render.com (проще всего)

1) Залейте репозиторий на GitHub.
2) В Render можно сделать двумя способами:

- **Blueprint**: Render сам подхватит `render.yaml` (самый быстрый путь).
- **Web Service**: создайте **New → Web Service** и выберите репозиторий.

3) Настройки:

- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm run start`

4) Добавьте переменные окружения:

- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CHAT_ID`

5) Нажмите Deploy — Render выдаст **URL** (это и будет рабочая ссылка на игру).

